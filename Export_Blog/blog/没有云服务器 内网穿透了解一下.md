---
title:  没有云服务器？内网穿透了解一下 
date:  2021-03-20 11:21:2806-0907-0706-0205-1404-1307-0711-3012-2001-2011-1812-3010-3103-1007-1303-3001-2808-2001-1607-14 
---
**内网穿透又叫端口映射，用一句最简单的话来讲就是：将你的计算机所连接的私有网络映射到公网上，别人通过你给的域名或ip即可访问你本地的服务。具体的原理可参照[百度百科](https://baike.baidu.com/item/%E5%86%85%E7%BD%91%E7%A9%BF%E9%80%8F/8597835)  
这么做可以实现各大厂商的云服务器（阿里云，腾讯云，百度云，华为云等）的效果，通过公网地址访问服务器**

**这里分享一些提供内网穿透的网站，前三种是我用过的，感觉都还不错（仅供参考）：**

1. **[Sunny-Ngrok](https://www.ngrok.cc/)：免费版，带宽：10 Mbps，限速：128Kbps，限流：无限，隧道数量：每种协议1条**
2. **[SAKURA FRP](https://www.natfrp.com/)：免费版（需要支付一元实名认证），带宽：10 Mbps，限速：4 Mbps，限流：5 GiB+限速流量（进入该状态24小时后会进行流量重置并恢复限速至正常限速），隧道数量：5条**
3. **[NATTUNNEL](https://www.nsloop.com/nattunnel)：免费版（隧道每天停止），带宽：1Mbps，限速：不限，限流：无限，隧道数量：1条**
4. **[浮居内网穿透](https://frp.cool/)：免费版，带宽：5Mbps，限速：5Mbps，限流：5GiB，隧道数量：2条**
5. **[NATAPP](https://natapp.cn/)：免费版，带宽：1Mbps，限速：1Mbps，限流：不限，隧道数量：0条**
6. **[花生壳](https://hsk.oray.com/)：免费版，带宽：1Mbps，限速：1Mbps，限流：1GiB，隧道数量：2条**
7. **[网穿云](http://www.neiwangchuantou.net/)：免费版，带宽：3Mbps，限速：3Mbps，限流：7天不限流量,激活后流量限制每月/1G，隧道数量：1条**
8. **[cpolar](https://www.cpolar.com/)：免费版，带宽：不清楚，限速：不清楚，限流：不清楚，隧道数量：1条**
9. **[路由侠](http://www.luyouxia.com/)：免费版，带宽：1Mbps，限速：1Mbps，限流：1GiB，隧道数量：2条**
10. **[魔法隧道](http://www.mofasuidao.cn/)：积分兑换版，带宽：官网说100M，限速：不清楚，限流：不清楚，隧道数量：不清楚**

**下面，我就[Sunny-Ngrok](https://www.ngrok.cc/)来分享一下服务器搭建，其实都大同小异，照着官方文档来，慢慢的就会了**

**这里我简单描述一下内网穿透的两个应用，一是服务器搭建，二是远程桌面的搭建**

**首先是服务器搭建，在此之前，我们得先开启本地服务器，这里以node为例，[环境搭建](https://blog.csdn.net/time_____/article/details/114024145)，[静态文件服务](https://blog.csdn.net/time_____/article/details/114281583)，[本地文件上线](https://blog.csdn.net/time_____/article/details/104439713)，以及用到的[懒加载案例](https://blog.csdn.net/time_____/article/details/114326156)在之前文章有说到，这里直接进入正题**

**开启本地服务运行懒加载案例，通过127.0.0.1访问网页，我这里是运行在VSCode插件（live server）下，当然也可以参照[静态文件服务](https://blog.csdn.net/time_____/article/details/114281583)把项目运行在node服务下，首先保证网页和接口可以在本地运行访问  
我的前端部分端口号是5500，后端接口端口号是1024**  
![](https://img-blog.csdnimg.cn/20210314140340632.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/2021031414041957.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**但是[Sunny-Ngrok](https://www.ngrok.cc/)免费版的对http协议只提供一个端口的隧道，此时我们就要用Nginx进行端口代理了，Nginx配置可以参考[Nginx文章](https://blog.csdn.net/time_____/article/details/114750930)，我这里的配置如下**

```
    server {
        listen       10240;#监听端口
        server_name  localhost;
        location / {
            proxy_pass http://127.0.0.1:1024/;#反向代理后端接口
        }
        location /client {
            proxy_pass http://127.0.0.1:5500/;#反向代理前端页面
        }
        
        error_page   500 502 503 504  /50x.html;
        location = /50x.html {
            root   html;
        }
 
    }
```

**此时通过输入[http://127.0.0.1:10240/client/](http://127.0.0.1:10240/client/lazyLoad.html)就会代理到[http://127.0.0.1:5500/](http://127.0.0.1:5500/)下，输入[http://127.0.0.1:10240](http://127.0.0.1:10240/getList?len1000)/会被代理到[http://127.0.0.1:1024/](http://127.0.0.1:10240/getList?len1000)下**

**下一步，注册[Sunny-Ngrok](https://www.ngrok.cc/)账号，登录并购买免费服务器，配置服务器设置，最后下载穿透软件**  
![](https://img-blog.csdnimg.cn/20210312225657902.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210312225843323.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314143154253.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314143431919.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**下载完成后点击启动工具，在隧道管理中复制刚才新建的隧道id，粘贴到隧道软件中，并回车，进入到连接界面**  
![](https://img-blog.csdnimg.cn/20210314144024175.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)  
![](https://img-blog.csdnimg.cn/20210314143842729.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314144217617.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314144414400.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**此时刷新隧道管理界面，点击查看状态，可以看到，当前连接的ip，说明内网穿透成功**

![](https://img-blog.csdnimg.cn/20210314144528694.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)  
**下一步，我们在新页面中打开赠送域名加路径，如：[http://example.com/client/lazyLoad.html](http://example.com/client/lazyLoad.html)(example.com是赠送域名)，打开后会提示输入账号密码。  
输入http验证用户名和密码即可**  
![](https://img-blog.csdnimg.cn/20210314145038500.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314150441896.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**但是此时懒加载请求的接口是本地的127.0.0.1，我们要修改为[http://example.com/getList?len=1000](http://example.com/getList?len1000)，最后打开[http://example.com/client/lazyLoad.html](http://example.com/client/lazyLoad.html)，显示以下效果**  
![](https://img-blog.csdnimg.cn/2021031415095894.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314151909628.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)  
**做到这里，服务器内网穿透的服务器搭建就完成了。**

**接下来，我们来尝试搭建一下远程桌面**

**和之前一样，购买新的免费服务器，并且配置tcp协议，这里有两点需要注意：**

1. **本地映射的ip不能使用127.0.0.1，而是使用局域网内的ip，通过ipconfig查看本机在局域网的ip并复制**
2. **远程桌面默认端口是3389**

![](https://img-blog.csdnimg.cn/20210314154208975.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**下面是我远程桌面的配置**  
![](https://img-blog.csdnimg.cn/20210314154305325.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)  
**隧道管理**  
![](https://img-blog.csdnimg.cn/20210314154549688.png)  
**最后和上面一样，运行内网穿透软件即可（可能会一直出现reconnecting提示，原因在[官网文档](https://www.ngrok.cc/_book/error/ngrok.html)中，我这的解决方法是在隧道管理中踢下线，然后多连几次）**  
![](https://img-blog.csdnimg.cn/20210314160549637.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314161635100.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**我们可以使用另一台电脑或者手机版的远程桌面连接当前电脑（手机版可以去酷安），下面是用手机连接的效果**  
![](https://img-blog.csdnimg.cn/20210314162219619.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314162253401.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)![](https://img-blog.csdnimg.cn/20210314162343578.png?x-oss-processimage/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3RpbWVfX19fXw,size_16,color_FFFFFF,t_70)

**总结：内网穿透虽然比服务器要便宜，但是还要考虑自己电脑的电费和损耗，而且做服务器需要一直开着，所以，还是要对比，比较一下，选择适合自己的方案**

**希望这篇文章能帮助你**